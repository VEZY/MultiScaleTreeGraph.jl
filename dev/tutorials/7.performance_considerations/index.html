<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance Considerations · MultiScaleTreeGraph.jl</title><meta name="title" content="Performance Considerations · MultiScaleTreeGraph.jl"/><meta property="og:title" content="Performance Considerations · MultiScaleTreeGraph.jl"/><meta property="twitter:title" content="Performance Considerations · MultiScaleTreeGraph.jl"/><meta name="description" content="Documentation for MultiScaleTreeGraph.jl."/><meta property="og:description" content="Documentation for MultiScaleTreeGraph.jl."/><meta property="twitter:description" content="Documentation for MultiScaleTreeGraph.jl."/><meta property="og:url" content="https://VEZY.github.io/MultiScaleTreeGraph.jl/tutorials/7.performance_considerations/"/><meta property="twitter:url" content="https://VEZY.github.io/MultiScaleTreeGraph.jl/tutorials/7.performance_considerations/"/><link rel="canonical" href="https://VEZY.github.io/MultiScaleTreeGraph.jl/tutorials/7.performance_considerations/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MultiScaleTreeGraph.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../get_started/">Getting started</a></li><li><span class="tocitem">The MTG format</span><ul><li><a class="tocitem" href="../../the_mtg/mtg_concept/">Concept</a></li><li><a class="tocitem" href="../../the_mtg/mtg_format/">File format</a></li><li><a class="tocitem" href="../../the_mtg/our_implementation/">Our implementation</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../0.read_write/">Read and Write MTGs</a></li><li><a class="tocitem" href="../1.manipulate_node/">Accessing node data</a></li><li><a class="tocitem" href="../2.descendants_ancestors_filters/">Node attributes</a></li><li><a class="tocitem" href="../3.transform_mtg/">Transform an MTG</a></li><li><a class="tocitem" href="../4.convert_mtg/">Converting MTGs</a></li><li><a class="tocitem" href="../5.plotting/">Plotting</a></li><li><a class="tocitem" href="../6.add_remove_nodes/">Add/remove nodes</a></li><li class="is-active"><a class="tocitem" href>Performance Considerations</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Performance-Tips"><span>Performance Tips</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Performance Considerations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Performance Considerations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VEZY/MultiScaleTreeGraph.jl/blob/master/docs/src/tutorials/7.performance_considerations.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Performance-Considerations"><a class="docs-heading-anchor" href="#Performance-Considerations">Performance Considerations</a><a id="Performance-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Considerations" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>This tutorial covers some of the performance considerations when using MultiScaleTreeGraph.jl. It is not meant to be a comprehensive guide, but rather a starting point for users to understand the performance implications of their code.</p><p>It is important to note that MultiScaleTreeGraph.jl is high-performance by design. The package is designed to be as fast as possible considering the most common use cases. However, there are some things that the user can do to improve performance.</p><h2 id="Performance-Tips"><a class="docs-heading-anchor" href="#Performance-Tips">Performance Tips</a><a id="Performance-Tips-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-Tips" title="Permalink"></a></h2><h3 id="Attribute-types"><a class="docs-heading-anchor" href="#Attribute-types">Attribute types</a><a id="Attribute-types-1"></a><a class="docs-heading-anchor-permalink" href="#Attribute-types" title="Permalink"></a></h3><p>The type used to store the attributes in the nodes are completely free, and can have a significant impact on performance. By default, the attributes are stored in a <code>Dict{Symbol, Any}</code>. This is a very flexible type that allows for getting attributes by name, updating their values, and adding or deleting attributes. However, this flexibility comes at a cost. The <code>Dict</code> type is fast but slower than more optimized types. </p><p>If the user just wants to read an MTG and extract information from it, but not update values or add new attributes, it is recommended to use a <code>NamedTuple</code> instead. This will improve performance significantly.</p><p>If the user still want to update values, but does not need to repeatedly add or delete attributes, it is recommended to use a <code>MutableNamedTuple</code>. This will improve performance significantly over <code>Dict</code>s.</p><h3 id="MTG-encoding"><a class="docs-heading-anchor" href="#MTG-encoding">MTG encoding</a><a id="MTG-encoding-1"></a><a class="docs-heading-anchor-permalink" href="#MTG-encoding" title="Permalink"></a></h3><p>The MTG encoding is the type used to store the MTG information about the node, <em>i.e.</em> the <code>scale</code>, <code>index</code>, <code>symbol</code> and <code>link</code>.</p><p>By default, MultiScaleTreeGraph.jl uses a mutable encoding (<a href="../../api/#MultiScaleTreeGraph.MutableNodeMTG"><code>MutableNodeMTG</code></a>), which allows for modifying this information. However, if the user does not need to modify these, it is recommended to use an immutable encoding instead (<a href="../../api/#MultiScaleTreeGraph.NodeMTG"><code>NodeMTG</code></a>). This will improve performance significantly.</p><h3 id="Traversal:-node-caching"><a class="docs-heading-anchor" href="#Traversal:-node-caching">Traversal: node caching</a><a id="Traversal:-node-caching-1"></a><a class="docs-heading-anchor-permalink" href="#Traversal:-node-caching" title="Permalink"></a></h3><p>MultiScaleTreeGraph.jl traverses all nodes by default when performing tree traversal. The traversal is done in a recursive manner so it is performant, but not always as fast as it could be. For example, we could have a very large tree with only two leaves at the top. In this case, we would traverse all nodes in the tree, even though we only need to traverse two nodes.</p><p>To improve performance, it is possible to cache any type of <code>traversal</code>, including any kind of filter on the nodes, and then use the cached traversal instead of the default one. This will improve performance significantly.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A cache is a data structure that stores the result of a computation so that it can be reused later. In this case, the cache stores a pointer to the nodes from the traversal so that it can be efficiently reused later. This is a common technique to improve performance at the cost of memory, though the memory cost is usually very small.</p></div></div><p>To cache a traversal, you can use <a href="../../api/#MultiScaleTreeGraph.cache_nodes!-Tuple{Any}"><code>cache_nodes!</code></a>. For example, if you want to cache all the <strong>leaf</strong> nodes in the MTG, you can do:</p><pre><code class="language-julia hljs">cache_nodes!(mtg, symbol = &quot;Leaf&quot;)</code></pre><p>This will cache all the nodes with the symbol <code>&quot;Leaf&quot;</code> in the MTG. Then, the tree traversal functions will use the cached traversal to iterate over the nodes.</p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Tree traversal is <em>very</em> fast, so caching nodes is not always necessary. Caching should be used when the traversal is needed <strong>multiple times</strong>, and the traversal is sparse, <em>i.e.</em> a lot of nodes are filtered-out.</p></div></div><h3 id="Traversal:-descendants-values-caching"><a class="docs-heading-anchor" href="#Traversal:-descendants-values-caching">Traversal: descendants values caching</a><a id="Traversal:-descendants-values-caching-1"></a><a class="docs-heading-anchor-permalink" href="#Traversal:-descendants-values-caching" title="Permalink"></a></h3><p>Similarly to caching nodes during tree traversal, the mutating version of <a href="../../api/#MultiScaleTreeGraph.descendants"><code>descendants</code></a> -<a href="../../api/#MultiScaleTreeGraph.descendants!"><code>descendants!</code></a>- provides a way to cache the values from the descendants of a node. This is useful when the descendants of a node are needed multiple times, as it avoids traversing the tree multiple times. For example, this is useful when computing the total biomass of all wood each segment supports in a tree, as the biomass of a node is the sum of the biomass of its descendants.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../6.add_remove_nodes/">« Add/remove nodes</a><a class="docs-footer-nextpage" href="../../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 14 March 2024 15:37">Thursday 14 March 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
